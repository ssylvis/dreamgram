<% if @dream.errors.any? -%>
  var notice = $("<%= escape_javascript(render(:partial => "shared/notices")) %>");
  $(".notices").empty().append(notice);

<% else -%>
  $("#dream_<%= @dream.id %>").remove();

  <% if @account.dreams_remaining == 1 -%>
    var placeholder = $("<%= escape_javascript(render('dreams/add')) %>");
    $(".dreams .col-xs-12").append(placeholder);
  <% else -%>
    var placeholder = $("<%= escape_javascript(
      render(:partial => 'dreams/placeholder', :locals => {:number => @account.dreams.count + 2})) %>");
    $("#add_dream").after(placeholder);
  <% end -%>

  <% if current_account.dreams.empty? %>
    $(".header .buttons .edit").hide();
    $(".header .buttons .social").hide();
    $(".dreams .alert").show();
  <% end -%>
<% end -%>
